<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ°£å¥å‹è‹±æ–‡ç·´ç¿’</title>
    <link rel="stylesheet" href="weatherstyle.css">
</head>
<body>
    <div class="container">
        <h1>â˜€ï¸ Lori's Classroom - å¤©æ°£å¥å‹ç·´ç¿’ ğŸŒ§ï¸</h1>
        
        <div class="pattern-explanation">
            <h4>å››ç¨®å¤©æ°£å¥å‹ï¼š</h4>
            <div class="pattern-example">1. It + å¤©æ°£å‹•è© + å‰¯è© â¡ï¸ It snows a lot. / It snows heavily.</div>
            <div class="pattern-example">2. There is/are + å¤©æ°£åè© â¡ï¸ There is a lot of rain.</div>
            <div class="pattern-example">3. We have + å¤©æ°£åè© â¡ï¸ We have heavy snow.</div>
            <div class="pattern-example">4. It is + å¤©æ°£å½¢å®¹è© â¡ï¸ It is snowy here in winter.</div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('transform')">å¥å­ä»£æ›</button>
            <button class="tab" onclick="showTab('translate')">ä¸­ç¿»è‹±</button>
            <button class="tab" onclick="showTab('choice')">é¸æ“‡é¡Œ</button>
        </div>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        
        <div class="score" id="scoreDisplay">å¾—åˆ†: 0 / 0</div>
        
        <!-- å¥å­ä»£æ›ç·´ç¿’ -->
        <div id="transform" class="practice-area active">
            <!--ä¸‹é¢divè£¡é¢çš„ã€Œé¡Œç›® 1/Xã€æ•¸å­—æœƒè‡ªå‹•è®ŠåŒ–ä¸éœ€èª¿æ•´-->
            <div class="question-counter" id="transformCounter">é¡Œç›® 1 / X</div>
            <div class="question" id="transformQuestion">
                <h3>å°‡ä¸‹åˆ—å¥å­æ”¹å¯«æˆå…¶ä»–å¥å‹ï¼š</h3>
                <p id="transformSentence"></p>
                <div class="input-area">
                    <input type="text" id="transformAnswer" placeholder="è«‹ Chank åœ¨é€™è£¡è¼¸å…¥ä½ çš„ç­”æ¡ˆ..." />
                </div>
                <button class="btn" onclick="prevTransform()">ä¸Šä¸€é¡Œ</button>
                <button class="btn" onclick="checkTransform()">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button class="btn" onclick="nextTransform()">ä¸‹ä¸€é¡Œ</button>
                <div id="transformFeedback" class="feedback" style="display: none;"></div>
            </div>
        </div>
        
        <!-- ä¸­ç¿»è‹±ç·´ç¿’ -->
        <div id="translate" class="practice-area">
            <div class="question-counter" id="translateCounter">é¡Œç›® 1 / X</div>
            <div class="question" id="translateQuestion">
                <h3>å°‡ä¸‹åˆ—ä¸­æ–‡ç¿»è­¯æˆè‹±æ–‡ï¼š</h3>
                <p id="translateSentence"></p>
                <div class="input-area">
                    <input type="text" id="translateAnswer" placeholder="è«‹ Chank åœ¨é€™è£¡è¼¸å…¥ä½ çš„è‹±æ–‡ç¿»è­¯..." />
                </div>
                <button class="btn" onclick="prevTranslate()">ä¸Šä¸€é¡Œ</button>
                <button class="btn" onclick="checkTranslate()">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button class="btn" onclick="nextTranslate()">ä¸‹ä¸€é¡Œ</button>
                <div id="translateFeedback" class="feedback" style="display: none;"></div>
            </div>
        </div>
        
        <!-- é¸æ“‡é¡Œç·´ç¿’ -->
        <div id="choice" class="practice-area">
            <div class="question-counter" id="choiceCounter">é¡Œç›® 1 / X</div>
            <div class="question" id="choiceQuestion">
                <h3>é¸æ“‡æ­£ç¢ºçš„å¥å­ï¼š</h3>
                <p id="choiceSentence"></p>
                <div class="options" id="choiceOptions"></div>
                <button class="btn" onclick="prevChoice()">ä¸Šä¸€é¡Œ</button>
                <button class="btn" onclick="checkChoice()">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button class="btn" onclick="nextChoice()">ä¸‹ä¸€é¡Œ</button>
                <div id="choiceFeedback" class="feedback" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        // ç·´ç¿’æ•¸æ“š
        const transformData = [
            {
                original: "There is heavy rain in summer.",
                alternatives: ["We have heavy rain in summer.", "It rains heavily in summer."],
                pattern: "There is â†’ We have / It + verb"
            },
            {
                original: "We have strong winds in autumn.",
                alternatives: ["There are strong winds in autumn.", "It's windy in autumn.", "The wind blows strongly in autumn."],
                pattern: "We have â†’ There are / It's + adj / subject + verb"
            },
            {
                original: "It snows a lot in winter.",
                alternatives: ["There is a lot of snow in winter.", "We have a lot of snow in winter."],
                pattern: "It + verb â†’ There is / We have + noun"
            },
            {
                original: "There is thick fog in the morning.",
                alternatives: ["We have thick fog in the morning.", "It's foggy in the morning."],
                pattern: "There is â†’ We have / It's + adj"
            },
            {
                original: "We have hot weather in July.",
                alternatives: ["There is hot weather in July.", "It's hot in July."],
                pattern: "We have â†’ There is / It's + adj"
            },
            {
                original: "It's very cold in December.",
                alternatives: ["There is very cold weather in December.", "We have very cold weather in December."],
                pattern: "It's + adj â†’ There is / We have + noun"
            },
            {
                original: "Test 7",
                alternatives: ["There is very cold weather in December.", "We have very cold weather in December."],
                pattern: "It's + adj â†’ There is / We have + noun"
            }            
        ];

        const translateData = [
             {
                chinese: "å°ç£å¤å¤©æœ‰å¾ˆå¤šé›¨ã€‚",
                answers: ["There is a lot of rain in Taiwan in summer.", "We have a lot of rain in Taiwan in summer.", "It rains a lot in Taiwan in summer.", "It is rainy in Taiwan in summer."]
            },
            {
                chinese: "é€™è£¡å†¬å¤©ç¶“å¸¸ä¸‹é›ªã€‚",
                answers: ["There is often snow here in winter.", "We often have snow here in winter.", "It often snows here in winter.", "It is often snowy here in winter."]
            },
            {
                chinese: "é‚£è£¡å¾ˆå°‘ä¸‹é›¨ã€‚",
                answers: ["There is little rain there.", "They have little rain there.", "It seldom/rarely rains there."]
            },
            {
                chinese: "æ˜¥å¤©é¢¨å¾ˆå¤§ã€‚",
                answers: ["It is windy in spring.", "There are strong winds in spring.", "We have strong winds in spring."]
            },
            {
                chinese: "æ—©ä¸Šæœ‰æ¿ƒéœ§ã€‚(ğŸ”† éœ§ï¼šfogã€foggy)",
                answers: ["There is thick/heavy fog in the morning.", "We have thick/heavy fog in the morning.", "It's foggy in the morning."]
            },
            {
                chinese: "æ˜¨å¤©éå¸¸æ™´æœ—(æœ‰ç‡¦çˆ›çš„é™½å…‰)ã€‚",
                answers: ["There was bright sunshine yesterday.", "We had bright sunshine yesterday.", "It was very sunny yesterday."]
            }
        ];

        const choiceData = [
            {
                question: "ã€Œå†¬å¤©ä¸‹å¤§é›ªã€çš„æ­£ç¢ºè‹±æ–‡æ˜¯ï¼š",
                options: [
                    "There is heavy snow in winter.",
                    "There have heavy snow in winter.",
                    "It have heavy snow in winter.",
                    "There are heavy snow in winter."
                ],
                correct: 0
            },
            {
                question: "ã€Œæˆ‘å€‘é€™è£¡ç¶“å¸¸åˆ®é¢¨ã€çš„æ­£ç¢ºè‹±æ–‡æ˜¯ï¼š",
                options: [
                    "We often has wind here.",
                    "We often have wind here.",
                    "There often have wind here.",
                    "It often have wind here."
                ],
                correct: 1
            },
            {
                question: "ã€Œå¤å¤©å¾ˆç†±ã€çš„æ­£ç¢ºè‹±æ–‡æ˜¯ï¼š",
                options: [
                    "There is hot in summer.",
                    "We have hot in summer.",
                    "It's hot in summer.",
                    "There are hot in summer."
                ],
                correct: 2
            },
            {
                question: "ã€Œæ˜¥å¤©é›¨æ°´å¾ˆå¤šã€çš„æ­£ç¢ºè‹±æ–‡æ˜¯ï¼š",
                options: [
                    "It rains a lot in spring.",
                    "It rain a lot in spring.",
                    "There rain a lot in spring.",
                    "We rain a lot in spring."
                ],
                correct: 0
            },
            {
                question: "ã€Œä»Šå¤©æœ‰é›·é›¨ã€çš„æ­£ç¢ºè‹±æ–‡æ˜¯ï¼š",
                options: [
                    "It have thunderstorms today.",
                    "There have thunderstorms today.",
                    "There are thunderstorms today.",
                    "We are thunderstorms today."
                ],
                correct: 2
            }
        ];

        // å…¨å±€è®Šé‡
        let currentTransformIndex = 0;
        let currentTranslateIndex = 0;
        let currentChoiceIndex = 0;
        let score = 0;
        let totalQuestions = 0;
        let selectedOption = -1;

        // åˆå§‹åŒ–
        function init() {
            showTransformQuestion();
            showTranslateQuestion();
            showChoiceQuestion();
            updateScore();
            updateCounters();
        }

        // é¡¯ç¤ºæ¨™ç±¤é 
        function showTab(tabName) {
            // éš±è—æ‰€æœ‰ç·´ç¿’å€åŸŸ
            document.querySelectorAll('.practice-area').forEach(area => {
                area.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ¨™ç±¤çš„active class
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„ç·´ç¿’å€åŸŸå’Œæ¨™ç±¤
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // æ›´æ–°é¡Œç›®è¨ˆæ•¸å™¨
        function updateCounters() {
            document.getElementById('transformCounter').textContent = `é¡Œç›® ${currentTransformIndex + 1} / ${transformData.length}`;
            document.getElementById('translateCounter').textContent = `é¡Œç›® ${currentTranslateIndex + 1} / ${translateData.length}`;
            document.getElementById('choiceCounter').textContent = `é¡Œç›® ${currentChoiceIndex + 1} / ${choiceData.length}`;
        }

        // å¥å­ä»£æ›ç·´ç¿’
        function showTransformQuestion() {
            const question = transformData[currentTransformIndex];
            document.getElementById('transformSentence').textContent = question.original;
            document.getElementById('transformAnswer').value = '';
            document.getElementById('transformFeedback').style.display = 'none';
            updateCounters();
        }

        function checkTransform() {
            const userAnswer = document.getElementById('transformAnswer').value.trim();
            const question = transformData[currentTransformIndex];
            const feedback = document.getElementById('transformFeedback');
            
            totalQuestions++;
            
            let isCorrect = false;
            for (let answer of question.alternatives) {
                if (userAnswer.toLowerCase() === answer.toLowerCase()) {
                    isCorrect = true;
                    break;
                }
            }
            
            if (isCorrect) {
                score++;
                feedback.className = 'feedback correct';
                feedback.textContent = 'æ­£ç¢ºï¼âœ… å¾ˆå¥½çš„å¥å‹è½‰æ›ï¼';
            } else {
                feedback.className = 'feedback wrong';
                feedback.textContent = `âŒ åƒè€ƒç­”æ¡ˆï¼š${question.alternatives.join(' / ')}`;
            }
            
            feedback.style.display = 'block';
            updateScore();
        }     

        function prevTransform() {
            currentTransformIndex = (currentTransformIndex + 1) % transformData.length;
            showTransformQuestion();
        }                

        function nextTransform() {
            currentTransformIndex = (currentTransformIndex + 1) % transformData.length;
            showTransformQuestion();
        }

        // ä¸­ç¿»è‹±ç·´ç¿’
        function showTranslateQuestion() {
            const question = translateData[currentTranslateIndex];
            document.getElementById('translateSentence').textContent = question.chinese;
            document.getElementById('translateAnswer').value = '';
            document.getElementById('translateFeedback').style.display = 'none';
            updateCounters();
        }

        function checkTranslate() {
            const userAnswer = document.getElementById('translateAnswer').value.trim();
            const question = translateData[currentTranslateIndex];
            const feedback = document.getElementById('translateFeedback');
            
            totalQuestions++;
            
            let isCorrect = false;
            for (let answer of question.answers) {
                if (userAnswer.toLowerCase() === answer.toLowerCase()) {
                    isCorrect = true;
                    break;
                }
            }
            
            if (isCorrect) {
                score++;
                feedback.className = 'feedback correct';
                feedback.textContent = 'æ­£ç¢ºï¼âœ… ç¿»è­¯å¾—å¾ˆå¥½ï¼';
            } else {
                feedback.className = 'feedback wrong';
                feedback.textContent = `âŒ åƒè€ƒç­”æ¡ˆï¼š${question.answers.join(' / ')}`;
            }
            
            feedback.style.display = 'block';
            updateScore();
        }

        function prevTranslate() {
            currentTranslateIndex = (currentTranslateIndex - 1) % translateData.length;
            showTranslateQuestion();
        }                        

        function nextTranslate() {
            currentTranslateIndex = (currentTranslateIndex + 1) % translateData.length;
            showTranslateQuestion();
        }

        // é¸æ“‡é¡Œç·´ç¿’
        function showChoiceQuestion() {
            const question = choiceData[currentChoiceIndex];
            document.getElementById('choiceSentence').textContent = question.question;
            
            const optionsContainer = document.getElementById('choiceOptions');
            optionsContainer.innerHTML = '';
            selectedOption = -1;
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('choiceFeedback').style.display = 'none';
            updateCounters();
        }

        function selectOption(index) {
            // ç§»é™¤ä¹‹å‰çš„é¸æ“‡
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // é¸æ“‡ç•¶å‰é¸é …
            document.querySelectorAll('.option')[index].classList.add('selected');
            selectedOption = index;
        }

        function checkChoice() {
            if (selectedOption === -1) {
                alert('è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼');
                return;
            }
            
            const question = choiceData[currentChoiceIndex];
            const feedback = document.getElementById('choiceFeedback');
            const options = document.querySelectorAll('.option');
            
            totalQuestions++;
            
            // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
            options[question.correct].classList.add('correct');
            
            if (selectedOption === question.correct) {
                score++;
                feedback.className = 'feedback correct';
                feedback.textContent = 'æ­£ç¢ºï¼âœ… æ–‡æ³•æŒæ¡å¾—å¾ˆå¥½ï¼';
            } else {
                options[selectedOption].classList.add('wrong');
                feedback.className = 'feedback wrong';
                feedback.textContent = 'âŒ æ­£ç¢ºç­”æ¡ˆå·²æ¨™ç¤ºç‚ºç¶ è‰²ï¼Œæ³¨æ„æ–‡æ³•çµæ§‹ï¼';
            }
            
            feedback.style.display = 'block';
            updateScore();
        }

        function prevChoice() {
            currentChoiceIndex = (currentChoiceIndex - 1) % choiceData.length;
            showChoiceQuestion();
        }        

        function nextChoice() {
            currentChoiceIndex = (currentChoiceIndex + 1) % choiceData.length;
            showChoiceQuestion();
        }

        // é˜²æ­¢å›ä¸Šä¸€é ç‚ºè² æ•¸
        (currentIndex - 1 + dataLength) % dataLength

        // æ›´æ–°åˆ†æ•¸å’Œé€²åº¦
        function updateScore() {
            const percentage = totalQuestions > 0 ? (score / totalQuestions) * 100 : 0;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('scoreDisplay').textContent = `å¾—åˆ†: ${score} / ${totalQuestions} (${percentage.toFixed(1)}%)`;
        }

        // æ·»åŠ Enteréµæ”¯æŒ
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('transformAnswer').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkTransform();
                }
            });
            
            document.getElementById('translateAnswer').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkTranslate();
                }
            });
        });

        // åˆå§‹åŒ–é é¢
        init();
    </script>
</body>
</html>